<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Advanced Topics | JavaScript for R</title>
  <meta name="description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Advanced Topics | JavaScript for R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Invite JavaScript into your Data Science workflow." />
  <meta name="github-repo" content="JohnCoene/javascript-for-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Advanced Topics | JavaScript for R" />
  
  <meta name="twitter:description" content="Invite JavaScript into your Data Science workflow." />
  

<meta name="author" content="John Coene" />


<meta name="date" content="2021-04-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="widgets-full.html"/>
<link rel="next" href="linking-widgets.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>
<script src="libs/r2d3-render-0.1.0/r2d3-render.js"></script>
<script src="libs/webcomponents-2.0.0/webcomponents.js"></script>
<script src="libs/r2d3-binding-0.2.5/r2d3.js"></script>
<script src="libs/d3v6-6.2.0/d3.min.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74544116-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74544116-1');
</script>
<meta property="og:title" content="Chapter 8 Advanced Topics | JavaScript for R">
<meta property="og:description" content="Book on using JavaScript with R for visualisations, web development, and computations.">
<meta property="og:image" content="https://book.javascript-for-r.com/images/social.png">
<meta property="og:url" content="https://book.javascript-for-r.com/">
<meta name="twitter:card" content="summary_large_image">
<meta property="og:site_name" content="Chapter 8 Advanced Topics | JavaScript for R">
<meta name="twitter:image:alt" content="Book on using JavaScript with R for visualisations, web development, and computations.">
<meta name="twitter:site" content="@jdatap">


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
<link rel="stylesheet" href="css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">JavaScript for R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#premise"><i class="fa fa-check"></i>Premise</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#book-structure"><i class="fa fa-check"></i>Book Structure</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
</ul></li>
<li class="part"><span><b>I Basics and Roadmap</b></span></li>
<li class="chapter" data-level="1" data-path="intro-overview.html"><a href="intro-overview.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-overview-rationale"><i class="fa fa-check"></i><b>1.1</b> Rationale</a></li>
<li class="chapter" data-level="1.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-methods"><i class="fa fa-check"></i><b>1.2</b> Methods</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-v8"><i class="fa fa-check"></i><b>1.2.1</b> V8</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-htmlwidgets"><i class="fa fa-check"></i><b>1.2.2</b> htmlwidgets</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-shiny"><i class="fa fa-check"></i><b>1.2.3</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro-overview.html"><a href="intro-overview.html#intro-amiss"><i class="fa fa-check"></i><b>1.3</b> Methods Amiss</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro-overview.html"><a href="intro-overview.html#intro-reactr-vuer"><i class="fa fa-check"></i><b>1.3.1</b> reactR &amp; vueR</a></li>
<li class="chapter" data-level="1.3.2" data-path="intro-overview.html"><a href="intro-overview.html#intro-r2d3"><i class="fa fa-check"></i><b>1.3.2</b> r2d3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prerequisites.html"><a href="prerequisites.html"><i class="fa fa-check"></i><b>2</b> Prerequisites</a><ul>
<li class="chapter" data-level="2.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-package-dev"><i class="fa fa-check"></i><b>2.1</b> R Package Development</a><ul>
<li class="chapter" data-level="2.1.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-create-pkg"><i class="fa fa-check"></i><b>2.1.1</b> Creating a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-metadata"><i class="fa fa-check"></i><b>2.1.2</b> Metadata</a></li>
<li class="chapter" data-level="2.1.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-r-code"><i class="fa fa-check"></i><b>2.1.3</b> R code</a></li>
<li class="chapter" data-level="2.1.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-documentation"><i class="fa fa-check"></i><b>2.1.4</b> Documentation</a></li>
<li class="chapter" data-level="2.1.5" data-path="prerequisites.html"><a href="prerequisites.html#basics-installed-files"><i class="fa fa-check"></i><b>2.1.5</b> Installed files</a></li>
<li class="chapter" data-level="2.1.6" data-path="prerequisites.html"><a href="prerequisites.html#basics-build-load-install"><i class="fa fa-check"></i><b>2.1.6</b> Build, load, and install</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-json"><i class="fa fa-check"></i><b>2.2</b> JSON</a><ul>
<li class="chapter" data-level="2.2.1" data-path="prerequisites.html"><a href="prerequisites.html#serialising"><i class="fa fa-check"></i><b>2.2.1</b> Serialising</a></li>
<li class="chapter" data-level="2.2.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-tabular"><i class="fa fa-check"></i><b>2.2.2</b> Tabular Data</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-javascript"><i class="fa fa-check"></i><b>2.3</b> JavaScript</a><ul>
<li class="chapter" data-level="2.3.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-chrome-devtools"><i class="fa fa-check"></i><b>2.3.1</b> Developer Tools</a></li>
<li class="chapter" data-level="2.3.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-var-scope"><i class="fa fa-check"></i><b>2.3.2</b> Variable Declaration and Scope</a></li>
<li class="chapter" data-level="2.3.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-object-model"><i class="fa fa-check"></i><b>2.3.3</b> Document Object Model</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prerequisites.html"><a href="prerequisites.html#basics-shiny"><i class="fa fa-check"></i><b>2.4</b> Shiny</a><ul>
<li class="chapter" data-level="2.4.1" data-path="prerequisites.html"><a href="prerequisites.html#basics-static-files"><i class="fa fa-check"></i><b>2.4.1</b> Serving Static Files</a></li>
<li class="chapter" data-level="2.4.2" data-path="prerequisites.html"><a href="prerequisites.html#basics-htmltools"><i class="fa fa-check"></i><b>2.4.2</b> Htmltools</a></li>
<li class="chapter" data-level="2.4.3" data-path="prerequisites.html"><a href="prerequisites.html#basics-deps-pro-cons"><i class="fa fa-check"></i><b>2.4.3</b> Serving vs.Â htmltools</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Data Visualisation</b></span></li>
<li class="chapter" data-level="3" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html"><i class="fa fa-check"></i><b>3</b> Introduction to Widgets</a><ul>
<li class="chapter" data-level="3.1" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-plotly"><i class="fa fa-check"></i><b>3.1</b> Plotly package</a></li>
<li class="chapter" data-level="3.2" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-dt"><i class="fa fa-check"></i><b>3.2</b> DT package</a></li>
<li class="chapter" data-level="3.3" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-crosstalk"><i class="fa fa-check"></i><b>3.3</b> Crosstalk</a></li>
<li class="chapter" data-level="3.4" data-path="widgets-intro-intro.html"><a href="widgets-intro-intro.html#widgets-intro-conclude"><i class="fa fa-check"></i><b>3.4</b> Wrap-up</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="widgets-basics.html"><a href="widgets-basics.html"><i class="fa fa-check"></i><b>4</b> Basics of Building Widgets</a><ul>
<li class="chapter" data-level="4.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-study"><i class="fa fa-check"></i><b>4.1</b> Read and Study</a></li>
<li class="chapter" data-level="4.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates"><i class="fa fa-check"></i><b>4.2</b> Candidate Libraries</a><ul>
<li class="chapter" data-level="4.2.1" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-plotly"><i class="fa fa-check"></i><b>4.2.1</b> Plotly.js</a></li>
<li class="chapter" data-level="4.2.2" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-highcharts"><i class="fa fa-check"></i><b>4.2.2</b> Highchart.js</a></li>
<li class="chapter" data-level="4.2.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-candidates-chart.js"><i class="fa fa-check"></i><b>4.2.3</b> Chart.js</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="widgets-basics.html"><a href="widgets-basics.html#widgets-basics-inner-workings"><i class="fa fa-check"></i><b>4.3</b> How It Works</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="widgets-first.html"><a href="widgets-first.html"><i class="fa fa-check"></i><b>5</b> Your First Widget</a><ul>
<li class="chapter" data-level="5.1" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-scaffold"><i class="fa fa-check"></i><b>5.1</b> The Scaffold</a></li>
<li class="chapter" data-level="5.2" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-htmloutput"><i class="fa fa-check"></i><b>5.2</b> The HTML Output</a></li>
<li class="chapter" data-level="5.3" data-path="widgets-first.html"><a href="widgets-first.html#widgets-first-js-files"><i class="fa fa-check"></i><b>5.3</b> JavaScript Files</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="widgets-realistic.html"><a href="widgets-realistic.html"><i class="fa fa-check"></i><b>6</b> A Realistic Widget</a><ul>
<li class="chapter" data-level="6.1" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-deps"><i class="fa fa-check"></i><b>6.1</b> Dependencies</a></li>
<li class="chapter" data-level="6.2" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-implementation"><i class="fa fa-check"></i><b>6.2</b> Implementation</a></li>
<li class="chapter" data-level="6.3" data-path="widgets-realistic.html"><a href="widgets-realistic.html#widgets-realistic-html-element"><i class="fa fa-check"></i><b>6.3</b> HTML Element</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="widgets-full.html"><a href="widgets-full.html"><i class="fa fa-check"></i><b>7</b> The Full Monty</a><ul>
<li class="chapter" data-level="7.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-deps"><i class="fa fa-check"></i><b>7.1</b> Dependencies</a></li>
<li class="chapter" data-level="7.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-js"><i class="fa fa-check"></i><b>7.2</b> JavaScript</a></li>
<li class="chapter" data-level="7.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-data"><i class="fa fa-check"></i><b>7.3</b> Working with Data</a></li>
<li class="chapter" data-level="7.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data"><i class="fa fa-check"></i><b>7.4</b> Transforming Data</a><ul>
<li class="chapter" data-level="7.4.1" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-js"><i class="fa fa-check"></i><b>7.4.1</b> Using JavaScript</a></li>
<li class="chapter" data-level="7.4.2" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify"><i class="fa fa-check"></i><b>7.4.2</b> Modify Serialiser</a></li>
<li class="chapter" data-level="7.4.3" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-replace"><i class="fa fa-check"></i><b>7.4.3</b> Replace Serialiser</a></li>
<li class="chapter" data-level="7.4.4" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-modify-data"><i class="fa fa-check"></i><b>7.4.4</b> Modify the Data</a></li>
<li class="chapter" data-level="7.4.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-transform-data-conclusion"><i class="fa fa-check"></i><b>7.4.5</b> Pros and Cons</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="widgets-full.html"><a href="widgets-full.html#widgets-full-on-print"><i class="fa fa-check"></i><b>7.5</b> On Print Method</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="widgets-adv.html"><a href="widgets-adv.html"><i class="fa fa-check"></i><b>8</b> Advanced Topics</a><ul>
<li class="chapter" data-level="8.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-shared"><i class="fa fa-check"></i><b>8.1</b> Shared Variables</a><ul>
<li class="chapter" data-level="8.1.1" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing"><i class="fa fa-check"></i><b>8.1.1</b> Sizing</a></li>
<li class="chapter" data-level="8.1.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-sizing-policy"><i class="fa fa-check"></i><b>8.1.2</b> Sizing Policy</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-resizing"><i class="fa fa-check"></i><b>8.2</b> Resizing</a></li>
<li class="chapter" data-level="8.3" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prerender"><i class="fa fa-check"></i><b>8.3</b> Pre Render Hooks and Security</a></li>
<li class="chapter" data-level="8.4" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-js"><i class="fa fa-check"></i><b>8.4</b> JavaScript Code</a></li>
<li class="chapter" data-level="8.5" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-prepend-append"><i class="fa fa-check"></i><b>8.5</b> Prepend and Append Content</a></li>
<li class="chapter" data-level="8.6" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-dependencies"><i class="fa fa-check"></i><b>8.6</b> Dependencies</a></li>
<li class="chapter" data-level="8.7" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-compatibility"><i class="fa fa-check"></i><b>8.7</b> Compatibility</a></li>
<li class="chapter" data-level="8.8" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-unit-tests"><i class="fa fa-check"></i><b>8.8</b> Unit Tests</a></li>
<li class="chapter" data-level="8.9" data-path="widgets-adv.html"><a href="widgets-adv.html#widgets-adv-performances"><i class="fa fa-check"></i><b>8.9</b> Performances</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="linking-widgets.html"><a href="linking-widgets.html"><i class="fa fa-check"></i><b>9</b> Linking Widgets</a><ul>
<li class="chapter" data-level="9.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-examples"><i class="fa fa-check"></i><b>9.1</b> Crosstalk Examples</a></li>
<li class="chapter" data-level="9.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-req"><i class="fa fa-check"></i><b>9.2</b> Crosstalk Requirements</a></li>
<li class="chapter" data-level="9.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-inner-workings"><i class="fa fa-check"></i><b>9.3</b> How it Works</a><ul>
<li class="chapter" data-level="9.3.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-keys"><i class="fa fa-check"></i><b>9.3.1</b> Keys</a></li>
<li class="chapter" data-level="9.3.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-communication-lines"><i class="fa fa-check"></i><b>9.3.2</b> Communication Lines</a></li>
<li class="chapter" data-level="9.3.3" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-groups"><i class="fa fa-check"></i><b>9.3.3</b> Groups</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-gio"><i class="fa fa-check"></i><b>9.4</b> Crosstalk with Gio</a></li>
<li class="chapter" data-level="9.5" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-r"><i class="fa fa-check"></i><b>9.5</b> R code</a></li>
<li class="chapter" data-level="9.6" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-js"><i class="fa fa-check"></i><b>9.6</b> JavaScript Code</a><ul>
<li class="chapter" data-level="9.6.1" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-send-keys"><i class="fa fa-check"></i><b>9.6.1</b> Send Selected Keys</a></li>
<li class="chapter" data-level="9.6.2" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-set-keys"><i class="fa fa-check"></i><b>9.6.2</b> Set Selected Keys</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="linking-widgets.html"><a href="linking-widgets.html#linking-widgets-using"><i class="fa fa-check"></i><b>9.7</b> Using Crosstalk with Gio</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="widgets-final.html"><a href="widgets-final.html"><i class="fa fa-check"></i><b>10</b> Final Revisions</a><ul>
<li class="chapter" data-level="10.1" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-data"><i class="fa fa-check"></i><b>10.1</b> Htmlwidgets and Data</a></li>
<li class="chapter" data-level="10.2" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-options"><i class="fa fa-check"></i><b>10.2</b> Plethora of Options</a></li>
<li class="chapter" data-level="10.3" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-interface"><i class="fa fa-check"></i><b>10.3</b> Interface Design</a></li>
<li class="chapter" data-level="10.4" data-path="widgets-final.html"><a href="widgets-final.html#widgets-final-exercises"><i class="fa fa-check"></i><b>10.4</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Web Development with Shiny</b></span></li>
<li class="chapter" data-level="11" data-path="shiny-intro.html"><a href="shiny-intro.html"><i class="fa fa-check"></i><b>11</b> Bidirectional Communication</a><ul>
<li class="chapter" data-level="11.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-websocket"><i class="fa fa-check"></i><b>11.1</b> WebSocket an Shiny</a></li>
<li class="chapter" data-level="11.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-sessions"><i class="fa fa-check"></i><b>11.2</b> Sessions</a></li>
<li class="chapter" data-level="11.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-example"><i class="fa fa-check"></i><b>11.3</b> Alerts, an example</a><ul>
<li class="chapter" data-level="11.3.1" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-explore"><i class="fa fa-check"></i><b>11.3.1</b> Explore</a></li>
<li class="chapter" data-level="11.3.2" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-r-to-js"><i class="fa fa-check"></i><b>11.3.2</b> From R to JavaScript</a></li>
<li class="chapter" data-level="11.3.3" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-serialise"><i class="fa fa-check"></i><b>11.3.3</b> Serialisation</a></li>
<li class="chapter" data-level="11.3.4" data-path="shiny-intro.html"><a href="shiny-intro.html#shiny-intro-js2r"><i class="fa fa-check"></i><b>11.3.4</b> JavaScript to R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="shiny-complete.html"><a href="shiny-complete.html"><i class="fa fa-check"></i><b>12</b> A Complete Integration</a><ul>
<li class="chapter" data-level="12.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-discover"><i class="fa fa-check"></i><b>12.1</b> Discover</a></li>
<li class="chapter" data-level="12.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-setup"><i class="fa fa-check"></i><b>12.2</b> Setup</a></li>
<li class="chapter" data-level="12.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-dependencies"><i class="fa fa-check"></i><b>12.3</b> Dependencies</a></li>
<li class="chapter" data-level="12.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-images"><i class="fa fa-check"></i><b>12.4</b> Static Files</a></li>
<li class="chapter" data-level="12.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-skeleton"><i class="fa fa-check"></i><b>12.5</b> Skeleton</a></li>
<li class="chapter" data-level="12.6" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-r2js"><i class="fa fa-check"></i><b>12.6</b> From R to JavaScript</a></li>
<li class="chapter" data-level="12.7" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-js2r"><i class="fa fa-check"></i><b>12.7</b> From JavaScript to R</a></li>
<li class="chapter" data-level="12.8" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-input-handler"><i class="fa fa-check"></i><b>12.8</b> Input handler</a></li>
<li class="chapter" data-level="12.9" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg"><i class="fa fa-check"></i><b>12.9</b> As a Package</a><ul>
<li class="chapter" data-level="12.9.1" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-deps"><i class="fa fa-check"></i><b>12.9.1</b> Dependencies</a></li>
<li class="chapter" data-level="12.9.2" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-trigger"><i class="fa fa-check"></i><b>12.9.2</b> Trigger classification</a></li>
<li class="chapter" data-level="12.9.3" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-js-code"><i class="fa fa-check"></i><b>12.9.3</b> JavaScript code</a></li>
<li class="chapter" data-level="12.9.4" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-input-handler"><i class="fa fa-check"></i><b>12.9.4</b> Input handler</a></li>
<li class="chapter" data-level="12.9.5" data-path="shiny-complete.html"><a href="shiny-complete.html#shiny-complete-pkg-test"><i class="fa fa-check"></i><b>12.9.5</b> Test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="shiny-tips.html"><a href="shiny-tips.html"><i class="fa fa-check"></i><b>13</b> Tips and Tricks</a><ul>
<li class="chapter" data-level="13.1" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-events"><i class="fa fa-check"></i><b>13.1</b> Shiny Events</a></li>
<li class="chapter" data-level="13.2" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-table-btn"><i class="fa fa-check"></i><b>13.2</b> Table Buttons</a></li>
<li class="chapter" data-level="13.3" data-path="shiny-tips.html"><a href="shiny-tips.html#shiny-tips-jQuery"><i class="fa fa-check"></i><b>13.3</b> jQuery</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="shiny-output.html"><a href="shiny-output.html"><i class="fa fa-check"></i><b>14</b> Custom Outputs</a><ul>
<li class="chapter" data-level="14.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inner-workings"><i class="fa fa-check"></i><b>14.1</b> Inner-workings</a></li>
<li class="chapter" data-level="14.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-setup"><i class="fa fa-check"></i><b>14.2</b> Setup</a></li>
<li class="chapter" data-level="14.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-r-fun"><i class="fa fa-check"></i><b>14.3</b> Output R Function</a></li>
<li class="chapter" data-level="14.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-html"><i class="fa fa-check"></i><b>14.4</b> Generate Output HTML</a></li>
<li class="chapter" data-level="14.5" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-renderer"><i class="fa fa-check"></i><b>14.5</b> Output Renderer</a></li>
<li class="chapter" data-level="14.6" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-binding"><i class="fa fa-check"></i><b>14.6</b> JavaScript Output Binding</a><ul>
<li class="chapter" data-level="14.6.1" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-title"><i class="fa fa-check"></i><b>14.6.1</b> Boxxy Title</a></li>
<li class="chapter" data-level="14.6.2" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-value"><i class="fa fa-check"></i><b>14.6.2</b> Boxxy Value</a></li>
<li class="chapter" data-level="14.6.3" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-boxxy-bg-color"><i class="fa fa-check"></i><b>14.6.3</b> Boxxy Background Color</a></li>
<li class="chapter" data-level="14.6.4" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-register"><i class="fa fa-check"></i><b>14.6.4</b> Register the Output Binding</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-usage"><i class="fa fa-check"></i><b>14.7</b> Boxxy Usage</a></li>
<li class="chapter" data-level="14.8" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-inject"><i class="fa fa-check"></i><b>14.8</b> Injecting Dependencies</a></li>
<li class="chapter" data-level="14.9" data-path="shiny-output.html"><a href="shiny-output.html#shiny-output-preprocess"><i class="fa fa-check"></i><b>14.9</b> Preprocessing Custom Outputs</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="shiny-input.html"><a href="shiny-input.html"><i class="fa fa-check"></i><b>15</b> Custom Inputs</a><ul>
<li class="chapter" data-level="15.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-setup"><i class="fa fa-check"></i><b>15.1</b> Setup</a></li>
<li class="chapter" data-level="15.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-intro"><i class="fa fa-check"></i><b>15.2</b> Switch Input HTML and Style</a></li>
<li class="chapter" data-level="15.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-html"><i class="fa fa-check"></i><b>15.3</b> Generate Input HTML</a></li>
<li class="chapter" data-level="15.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-binding"><i class="fa fa-check"></i><b>15.4</b> JavaScript Input Binding</a><ul>
<li class="chapter" data-level="15.4.1" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-find"><i class="fa fa-check"></i><b>15.4.1</b> Find Inputs</a></li>
<li class="chapter" data-level="15.4.2" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-id"><i class="fa fa-check"></i><b>15.4.2</b> Get Input Id</a></li>
<li class="chapter" data-level="15.4.3" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-get-value"><i class="fa fa-check"></i><b>15.4.3</b> Get Input Value</a></li>
<li class="chapter" data-level="15.4.4" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-set-value"><i class="fa fa-check"></i><b>15.4.4</b> Set Input Value</a></li>
<li class="chapter" data-level="15.4.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-receive-msg"><i class="fa fa-check"></i><b>15.4.5</b> Receive Input Messages</a></li>
<li class="chapter" data-level="15.4.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-sub-unsub"><i class="fa fa-check"></i><b>15.4.6</b> Subscribe and Unsubscribe Inputs</a></li>
<li class="chapter" data-level="15.4.7" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-rate-policy"><i class="fa fa-check"></i><b>15.4.7</b> Input Rate Policy</a></li>
<li class="chapter" data-level="15.4.8" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-register"><i class="fa fa-check"></i><b>15.4.8</b> Registering the Input Binding</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-update"><i class="fa fa-check"></i><b>15.5</b> Update Input</a></li>
<li class="chapter" data-level="15.6" data-path="shiny-input.html"><a href="shiny-input.html#shiny-input-excercise"><i class="fa fa-check"></i><b>15.6</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="shiny-cookies.html"><a href="shiny-cookies.html"><i class="fa fa-check"></i><b>16</b> Cookies</a><ul>
<li class="chapter" data-level="16.1" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-discover"><i class="fa fa-check"></i><b>16.1</b> Discover js-cookie</a></li>
<li class="chapter" data-level="16.2" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-setup"><i class="fa fa-check"></i><b>16.2</b> Setup Project</a></li>
<li class="chapter" data-level="16.3" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-javascript"><i class="fa fa-check"></i><b>16.3</b> JavaScript Cookies</a></li>
<li class="chapter" data-level="16.4" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-r-code"><i class="fa fa-check"></i><b>16.4</b> R Code</a></li>
<li class="chapter" data-level="16.5" data-path="shiny-cookies.html"><a href="shiny-cookies.html#shiny-cookies-exercises"><i class="fa fa-check"></i><b>16.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="shiny-widgets.html"><a href="shiny-widgets.html"><i class="fa fa-check"></i><b>17</b> Widgets with Shiny</a><ul>
<li class="chapter" data-level="17.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-to-r"><i class="fa fa-check"></i><b>17.1</b> Widgets to R</a></li>
<li class="chapter" data-level="17.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handlers"><i class="fa fa-check"></i><b>17.2</b> Input Handlers for Widgets</a></li>
<li class="chapter" data-level="17.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-r-to-widgets"><i class="fa fa-check"></i><b>17.3</b> R to Widgets</a><ul>
<li class="chapter" data-level="17.3.1" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-send-data"><i class="fa fa-check"></i><b>17.3.1</b> Send Data from Widgets</a></li>
<li class="chapter" data-level="17.3.2" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-retrieve"><i class="fa fa-check"></i><b>17.3.2</b> Retrieve Widget Instance</a></li>
<li class="chapter" data-level="17.3.3" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-handle-data"><i class="fa fa-check"></i><b>17.3.3</b> Handle Data</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-proxy"><i class="fa fa-check"></i><b>17.4</b> Proxy Function</a></li>
<li class="chapter" data-level="17.5" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-clear-data"><i class="fa fa-check"></i><b>17.5</b> Clear Data</a></li>
<li class="chapter" data-level="17.6" data-path="shiny-widgets.html"><a href="shiny-widgets.html#shiny-widgets-update"><i class="fa fa-check"></i><b>17.6</b> Update the Widget</a></li>
</ul></li>
<li class="part"><span><b>IV JavaScript for Computations</b></span></li>
<li class="chapter" data-level="18" data-path="v8.html"><a href="v8.html"><i class="fa fa-check"></i><b>18</b> The V8 Engine</a><ul>
<li class="chapter" data-level="18.1" data-path="v8.html"><a href="v8.html#v8-installation"><i class="fa fa-check"></i><b>18.1</b> Installation</a></li>
<li class="chapter" data-level="18.2" data-path="v8.html"><a href="v8.html#v8-basics"><i class="fa fa-check"></i><b>18.2</b> Basics</a></li>
<li class="chapter" data-level="18.3" data-path="v8.html"><a href="v8.html#v8-external"><i class="fa fa-check"></i><b>18.3</b> External Libraries</a></li>
<li class="chapter" data-level="18.4" data-path="v8.html"><a href="v8.html#v8-npm"><i class="fa fa-check"></i><b>18.4</b> NPM Packages</a></li>
<li class="chapter" data-level="18.5" data-path="v8.html"><a href="v8.html#v8-pkg"><i class="fa fa-check"></i><b>18.5</b> Use in Packages</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="v8-ml.html"><a href="v8-ml.html"><i class="fa fa-check"></i><b>19</b> Machine Learning</a><ul>
<li class="chapter" data-level="19.1" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-dependency"><i class="fa fa-check"></i><b>19.1</b> Dependency</a></li>
<li class="chapter" data-level="19.2" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-regression"><i class="fa fa-check"></i><b>19.2</b> Simple Regression</a></li>
<li class="chapter" data-level="19.3" data-path="v8-ml.html"><a href="v8-ml.html#v8-ml-exercises"><i class="fa fa-check"></i><b>19.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>V Robust JavaScript</b></span></li>
<li class="chapter" data-level="20" data-path="webpack-intro.html"><a href="webpack-intro.html"><i class="fa fa-check"></i><b>20</b> Managing JavaScript</a><ul>
<li class="chapter" data-level="20.1" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-example"><i class="fa fa-check"></i><b>20.1</b> Example</a></li>
<li class="chapter" data-level="20.2" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-browser"><i class="fa fa-check"></i><b>20.2</b> Transpiling</a></li>
<li class="chapter" data-level="20.3" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-minification"><i class="fa fa-check"></i><b>20.3</b> Minification</a></li>
<li class="chapter" data-level="20.4" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-structure"><i class="fa fa-check"></i><b>20.4</b> Bundling and Modules</a></li>
<li class="chapter" data-level="20.5" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-decouple"><i class="fa fa-check"></i><b>20.5</b> Decoupling</a></li>
<li class="chapter" data-level="20.6" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-npm"><i class="fa fa-check"></i><b>20.6</b> NPM</a></li>
<li class="chapter" data-level="20.7" data-path="webpack-intro.html"><a href="webpack-intro.html#webpack-conclude"><i class="fa fa-check"></i><b>20.7</b> With R</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html"><i class="fa fa-check"></i><b>21</b> Discover Webpack and NPM</a><ul>
<li class="chapter" data-level="21.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install"><i class="fa fa-check"></i><b>21.1</b> Installation</a><ul>
<li class="chapter" data-level="21.1.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-mac"><i class="fa fa-check"></i><b>21.1.1</b> Mac OS</a></li>
<li class="chapter" data-level="21.1.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-ubuntu"><i class="fa fa-check"></i><b>21.1.2</b> Ubuntu</a></li>
<li class="chapter" data-level="21.1.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-windows"><i class="fa fa-check"></i><b>21.1.3</b> Windows</a></li>
<li class="chapter" data-level="21.1.4" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-other"><i class="fa fa-check"></i><b>21.1.4</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-setup"><i class="fa fa-check"></i><b>21.2</b> Set Up the App</a></li>
<li class="chapter" data-level="21.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-init-npm"><i class="fa fa-check"></i><b>21.3</b> Initialise NPM</a></li>
<li class="chapter" data-level="21.4" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-install-pkgs"><i class="fa fa-check"></i><b>21.4</b> Installing NPM Packages</a></li>
<li class="chapter" data-level="21.5" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-entry-points"><i class="fa fa-check"></i><b>21.5</b> Entry Point and Output</a></li>
<li class="chapter" data-level="21.6" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-conf"><i class="fa fa-check"></i><b>21.6</b> Configuration File</a></li>
<li class="chapter" data-level="21.7" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-npm-scripts"><i class="fa fa-check"></i><b>21.7</b> NPM scripts</a></li>
<li class="chapter" data-level="21.8" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-webpack-mode"><i class="fa fa-check"></i><b>21.8</b> Source maps</a></li>
<li class="chapter" data-level="21.9" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-bundle"><i class="fa fa-check"></i><b>21.9</b> Bundle</a></li>
<li class="chapter" data-level="21.10" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-internal-dependencies"><i class="fa fa-check"></i><b>21.10</b> Internal Dependencies</a></li>
<li class="chapter" data-level="21.11" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-external-dependencies"><i class="fa fa-check"></i><b>21.11</b> External Dependencies</a></li>
<li class="chapter" data-level="21.12" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export"><i class="fa fa-check"></i><b>21.12</b> Import and Export</a><ul>
<li class="chapter" data-level="21.12.1" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-named"><i class="fa fa-check"></i><b>21.12.1</b> Named</a></li>
<li class="chapter" data-level="21.12.2" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-default"><i class="fa fa-check"></i><b>21.12.2</b> Default</a></li>
<li class="chapter" data-level="21.12.3" data-path="webpack-intro-discover.html"><a href="webpack-intro-discover.html#webpack-intro-import-export-wrap-up"><i class="fa fa-check"></i><b>21.12.3</b> Wrap-up</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="packer-overview.html"><a href="packer-overview.html"><i class="fa fa-check"></i><b>22</b> Webpack with R</a><ul>
<li class="chapter" data-level="22.1" data-path="packer-overview.html"><a href="packer-overview.html#packer-principles"><i class="fa fa-check"></i><b>22.1</b> Principles of packer</a></li>
<li class="chapter" data-level="22.2" data-path="packer-overview.html"><a href="packer-overview.html#packer-scaffolds"><i class="fa fa-check"></i><b>22.2</b> Scaffolds</a></li>
<li class="chapter" data-level="22.3" data-path="packer-overview.html"><a href="packer-overview.html#packer-inputs"><i class="fa fa-check"></i><b>22.3</b> Inputs</a></li>
<li class="chapter" data-level="22.4" data-path="packer-overview.html"><a href="packer-overview.html#packer-r-file"><i class="fa fa-check"></i><b>22.4</b> R file</a></li>
<li class="chapter" data-level="22.5" data-path="packer-overview.html"><a href="packer-overview.html#packer-js-files"><i class="fa fa-check"></i><b>22.5</b> JavaScript Files</a></li>
<li class="chapter" data-level="22.6" data-path="packer-overview.html"><a href="packer-overview.html#packer-bundle"><i class="fa fa-check"></i><b>22.6</b> Bundle</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="packer-adv.html"><a href="packer-adv.html"><i class="fa fa-check"></i><b>23</b> Webpack Advanced</a><ul>
<li class="chapter" data-level="23.1" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-widgets"><i class="fa fa-check"></i><b>23.1</b> Widgets</a></li>
<li class="chapter" data-level="23.2" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue"><i class="fa fa-check"></i><b>23.2</b> Shiny with Vue and Bootstrap 4</a><ul>
<li class="chapter" data-level="23.2.1" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-setup"><i class="fa fa-check"></i><b>23.2.1</b> Setup</a></li>
<li class="chapter" data-level="23.2.2" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-bs4"><i class="fa fa-check"></i><b>23.2.2</b> Bootstrap 4 Installation</a></li>
<li class="chapter" data-level="23.2.3" data-path="packer-adv.html"><a href="packer-adv.html#packer-adv-shiny-vue-code"><i class="fa fa-check"></i><b>23.2.3</b> Vue Code</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI Closing Remarks</b></span></li>
<li class="chapter" data-level="24" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>24</b> Conclusion</a><ul>
<li class="chapter" data-level="24.1" data-path="conclusion.html"><a href="conclusion.html#conclusion-performances"><i class="fa fa-check"></i><b>24.1</b> Performances</a></li>
<li class="chapter" data-level="24.2" data-path="conclusion.html"><a href="conclusion.html#conclusion-trial-and-error"><i class="fa fa-check"></i><b>24.2</b> Trial and Error</a></li>
<li class="chapter" data-level="24.3" data-path="conclusion.html"><a href="conclusion.html#conclusion-ux"><i class="fa fa-check"></i><b>24.3</b> Functionality and UX</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">JavaScript for R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="widgets-adv" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Advanced Topics</h1>
<p>In the previous chapter, we put together an attractive, fully-functioning widget, but it lacks polish and does not use all the features htmlwidgets provides; this chapter explores those. We look into handling the size of widgets to ensure they are responsive as well as discuss potential security concerns and how to address them. Finally, we show how to pass JavaScript code from R to JavaScript and how to add HTML content before and after the widget.</p>
<div id="widgets-adv-shared" class="section level2">
<h2><span class="header-section-number">8.1</span> Shared Variables</h2>
<p>Up until now, the topic of shared variables had been omitted as it was not relevant. However, it will be from here onwards. Indeed we are about to discover how to manipulate the widget further; changing the data, resizing, and more. This will generally involve the JavaScript instance of the visualisation, the object named <code>controller</code> in the gio package, which, being defined in the <code>renderValue</code> function, is not accessible outside of it. To make it accessible outside of <code>renderValue</code> requires a tiny but consequential change without which resizing the widget will not be doable, for instance.</p>
<p>The <code>controller</code> variable has to be declared outside of the <code>renderValue</code> function, inside the <code>factory</code>. This was, in fact, indicated from the onset by the following comment: <code>// TODO: define shared variables for this instance</code> (generated by <code>htmlwidgets::scaffoldWidget</code>). Any variable declared as shown below will be accessible by all functions declared in the <code>factory</code>; <code>renderValue</code>, but also <code>resize</code> and others yet to be added.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb139-1" title="1"><span class="va">HTMLWidgets</span>.<span class="at">widget</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb139-2" title="2"></a>
<a class="sourceLine" id="cb139-3" title="3">  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;gio&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb139-4" title="4"></a>
<a class="sourceLine" id="cb139-5" title="5">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;output&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb139-6" title="6"></a>
<a class="sourceLine" id="cb139-7" title="7">  <span class="dt">factory</span><span class="op">:</span> <span class="kw">function</span>(el<span class="op">,</span> width<span class="op">,</span> height) <span class="op">{</span></a>
<a class="sourceLine" id="cb139-8" title="8"></a>
<a class="sourceLine" id="cb139-9" title="9">    <span class="co">// </span><span class="al">TODO</span><span class="co">: define shared variables for this instance</span></a>
<a class="sourceLine" id="cb139-10" title="10">    <span class="kw">var</span> controller<span class="op">;</span></a>
<a class="sourceLine" id="cb139-11" title="11"></a>
<a class="sourceLine" id="cb139-12" title="12">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb139-13" title="13"></a>
<a class="sourceLine" id="cb139-14" title="14">      <span class="dt">renderValue</span><span class="op">:</span> <span class="kw">function</span>(x) <span class="op">{</span></a>
<a class="sourceLine" id="cb139-15" title="15"></a>
<a class="sourceLine" id="cb139-16" title="16">        controller <span class="op">=</span> <span class="kw">new</span> <span class="va">GIO</span>.<span class="at">Controller</span>(el)<span class="op">;</span> <span class="co">// declared outside</span></a>
<a class="sourceLine" id="cb139-17" title="17">        </a>
<a class="sourceLine" id="cb139-18" title="18">        <span class="co">// add data</span></a>
<a class="sourceLine" id="cb139-19" title="19">        <span class="va">controller</span>.<span class="at">addData</span>(<span class="va">x</span>.<span class="at">data</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb139-20" title="20"></a>
<a class="sourceLine" id="cb139-21" title="21">        <span class="co">// define style</span></a>
<a class="sourceLine" id="cb139-22" title="22">        <span class="va">controller</span>.<span class="at">setStyle</span>(<span class="va">x</span>.<span class="at">style</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb139-23" title="23"></a>
<a class="sourceLine" id="cb139-24" title="24">        <span class="co">// render</span></a>
<a class="sourceLine" id="cb139-25" title="25">        <span class="va">controller</span>.<span class="at">init</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb139-26" title="26"></a>
<a class="sourceLine" id="cb139-27" title="27">      <span class="op">},</span></a>
<a class="sourceLine" id="cb139-28" title="28"></a>
<a class="sourceLine" id="cb139-29" title="29">      <span class="dt">resize</span><span class="op">:</span> <span class="kw">function</span>(width<span class="op">,</span> height) <span class="op">{</span></a>
<a class="sourceLine" id="cb139-30" title="30"></a>
<a class="sourceLine" id="cb139-31" title="31">        <span class="co">// </span><span class="al">TODO</span><span class="co">: code to re-render the widget with a new size</span></a>
<a class="sourceLine" id="cb139-32" title="32"></a>
<a class="sourceLine" id="cb139-33" title="33">      <span class="op">}</span></a>
<a class="sourceLine" id="cb139-34" title="34"></a>
<a class="sourceLine" id="cb139-35" title="35">    <span class="op">};</span></a>
<a class="sourceLine" id="cb139-36" title="36">  <span class="op">}</span></a>
<a class="sourceLine" id="cb139-37" title="37"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<div id="widgets-adv-sizing" class="section level3">
<h3><span class="header-section-number">8.1.1</span> Sizing</h3>
<p>The <code>gio</code> function of the package we developed in the previous chapter has arguments to specify the dimensions of the visualisation (width and height). However, think how rarely (if ever) one specifies these parameters when using plotly, highcharter, or leaflet. Indeed HTML visualisations should be responsive and fit the container they are placed inânot to be confused though; these are two different things. This enables creating visualisations that look great on large desktop screens as well as the smaller mobile phones or iPad screens. Pre-defining the dimensions of the visualisation (e.g.: <code>400px</code>), breaks all responsiveness as the width is no longer relative to its container. Using a relative width like <code>100%</code> ensures the visualisation always fits in the container edge to edge and enables responsiveness.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" title="1">arcs &lt;-<span class="st"> </span>jsonlite<span class="op">::</span><span class="kw">fromJSON</span>(</a>
<a class="sourceLine" id="cb140-2" title="2">  <span class="st">&#39;[</span></a>
<a class="sourceLine" id="cb140-3" title="3"><span class="st">    {</span></a>
<a class="sourceLine" id="cb140-4" title="4"><span class="st">      &quot;e&quot;: &quot;CN&quot;,</span></a>
<a class="sourceLine" id="cb140-5" title="5"><span class="st">      &quot;i&quot;: &quot;US&quot;,</span></a>
<a class="sourceLine" id="cb140-6" title="6"><span class="st">      &quot;v&quot;: 3300000</span></a>
<a class="sourceLine" id="cb140-7" title="7"><span class="st">    },</span></a>
<a class="sourceLine" id="cb140-8" title="8"><span class="st">    {</span></a>
<a class="sourceLine" id="cb140-9" title="9"><span class="st">      &quot;e&quot;: &quot;CN&quot;,</span></a>
<a class="sourceLine" id="cb140-10" title="10"><span class="st">      &quot;i&quot;: &quot;RU&quot;,</span></a>
<a class="sourceLine" id="cb140-11" title="11"><span class="st">      &quot;v&quot;: 10000</span></a>
<a class="sourceLine" id="cb140-12" title="12"><span class="st">    }</span></a>
<a class="sourceLine" id="cb140-13" title="13"><span class="st">  ]&#39;</span></a>
<a class="sourceLine" id="cb140-14" title="14">)</a>
<a class="sourceLine" id="cb140-15" title="15"></a>
<a class="sourceLine" id="cb140-16" title="16"><span class="kw">gio</span>(arcs)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:gio-size-issue"></span>
<img src="images/gio-size-issue.png" alt="Gio with no sizing management" width="100%" />
<p class="caption">
FIGURE 8.1: Gio with no sizing management
</p>
</div>
<p>When this is not specified, htmlwidgets sets the width of the visualisation to 400 pixels (see Figure <a href="widgets-adv.html#fig:gio-size-issue">8.1</a>).</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1"><span class="kw">gio</span>(arcs, <span class="dt">width =</span> <span class="dv">500</span>) <span class="co"># 500 pixels wide</span></a>
<a class="sourceLine" id="cb141-2" title="2"><span class="kw">gio</span>(arcs, <span class="dt">width =</span> <span class="st">&quot;100%&quot;</span>) <span class="co"># fits width</span></a></code></pre></div>
<p>These options are destined for the user of the package; the next section details how the developer can define default sizing behaviour.</p>
</div>
<div id="widgets-adv-sizing-policy" class="section level3">
<h3><span class="header-section-number">8.1.2</span> Sizing Policy</h3>
<p>One can specify a sizing policy when creating the widget, the sizing policy will dictate default dimensions and padding in different contexts:</p>
<ul>
<li>Global defaults</li>
<li>RStudio viewer</li>
<li>Web browser</li>
<li>R markdown</li>
</ul>
<p>It is often enough to specify general defaults as widgets are rarely expected to behave differently with respect to size depending on the context, but it can be useful in some cases.</p>
<p>Below we modify the sizing policy of gio via the <code>sizingPolicy</code> argument of the <code>createWidget</code> function. The function <code>htmlwidgets::sizingPolicy</code> has many arguments; we set the default width to 100% to ensure the visualisation fills its container entirely regardless of where it is rendered. We also remove all padding by setting it to 0 and set <code>browser.fill</code> to <code>TRUE</code>, so it automatically resizes the visualisation to fit the entire browser page.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb142-1" title="1"><span class="co"># create widget</span></a>
<a class="sourceLine" id="cb142-2" title="2">htmlwidgets<span class="op">::</span><span class="kw">createWidget</span>(</a>
<a class="sourceLine" id="cb142-3" title="3">  <span class="dt">name =</span> <span class="st">&#39;gio&#39;</span>,</a>
<a class="sourceLine" id="cb142-4" title="4">  x,</a>
<a class="sourceLine" id="cb142-5" title="5">  <span class="dt">width =</span> width,</a>
<a class="sourceLine" id="cb142-6" title="6">  <span class="dt">height =</span> height,</a>
<a class="sourceLine" id="cb142-7" title="7">  <span class="dt">package =</span> <span class="st">&#39;gio&#39;</span>,</a>
<a class="sourceLine" id="cb142-8" title="8">  <span class="dt">elementId =</span> elementId,</a>
<a class="sourceLine" id="cb142-9" title="9">  <span class="dt">sizingPolicy =</span> htmlwidgets<span class="op">::</span><span class="kw">sizingPolicy</span>(</a>
<a class="sourceLine" id="cb142-10" title="10">    <span class="dt">defaultWidth =</span> <span class="st">&quot;100%&quot;</span>,</a>
<a class="sourceLine" id="cb142-11" title="11">    <span class="dt">padding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb142-12" title="12">    <span class="dt">browser.fill =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb142-13" title="13">  )</a>
<a class="sourceLine" id="cb142-14" title="14">)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:gio-fit"></span>
<img src="images/gio-fit.png" alt="Gio with sizing policy" width="100%" />
<p class="caption">
FIGURE 8.2: Gio with sizing policy
</p>
</div>
<p>Figure <a href="widgets-adv.html#fig:gio-fit">8.2</a> shows the modified <code>sizingPolicy</code> produces a visualisation that fills the browser.</p>
</div>
</div>
<div id="widgets-adv-resizing" class="section level2">
<h2><span class="header-section-number">8.2</span> Resizing</h2>
<p>In the first widget built in this book (<code>playground</code>), we deconstructed the JavaScript <code>factory</code> function but omitted the <code>resize</code> function. The <code>resize</code> function does what it says on the tin: it is called when the widget is resized. What this function will contain entirely depends on the JavaScript library one is working with. Some are very easy to resize, other less so, that is for the developer to discover in the documentation of the library. Some libraries, like gio, do not even require using a resizing (see <a href="widgets-adv.html#fig:gio-small">8.3</a>) function and handle that automatically under the hood; resize the width of the RStudio viewer or web browser, and gio.js resizes too. This said, there is a function to force gio to resize. Though it is not in the official documentation, it can be found in the source code: <code>resizeUpdate</code> is a method of the controller and does not take any argument.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb143-1" title="1">...</a>
<a class="sourceLine" id="cb143-2" title="2">resize<span class="op">:</span> <span class="kw">function</span>(width<span class="op">,</span> height) <span class="op">{</span></a>
<a class="sourceLine" id="cb143-3" title="3">  <span class="va">controller</span>.<span class="at">resizeUpdate</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb143-4" title="4"><span class="op">}</span></a>
<a class="sourceLine" id="cb143-5" title="5">...</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:gio-small"></span>
<img src="images/gio-small.png" alt="Gio resized" width="100%" />
<p class="caption">
FIGURE 8.3: Gio resized
</p>
</div>
<p>To give the reader a better idea of what these tend to look like below are the ways plotly, highcharts, and chart.js do it.</p>
<p><strong>Plotly</strong></p>
<div class="sourceCode" id="cb144"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb144-1" title="1"><span class="va">Plotly</span>.<span class="at">relayout</span>(<span class="st">&#39;chartid&#39;</span><span class="op">,</span> <span class="op">{</span><span class="dt">width</span><span class="op">:</span> width<span class="op">,</span> <span class="dt">height</span><span class="op">:</span> height<span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>Highcharts</strong></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb145-1" title="1"><span class="va">chart</span>.<span class="at">setSize</span>(width<span class="op">,</span> height)<span class="op">;</span></a></code></pre></div>
<p><strong>Chart.js</strong></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb146-1" title="1"><span class="va">chart</span>.<span class="at">resize</span>()<span class="op">;</span></a></code></pre></div>
<p>Note that the <code>width</code> and <code>height</code> used in the functions above are obtained from the <code>resize</code> function itself (see arguments).</p>
<p>That is one of the reasons for ensuring the instance of the visualisation (<code>controller</code> in this case) is shared (declared in <code>factory</code>). If declared in the <code>renderValue</code> function then the <code>resize</code> function cannot access that object and thus cannot run the function required to resize the widget.</p>
</div>
<div id="widgets-adv-prerender" class="section level2">
<h2><span class="header-section-number">8.3</span> Pre Render Hooks and Security</h2>
<p>The <code>createWidget</code> function also comes with a <code>preRenderHook</code> argument, which accepts a function that is run just before the rendering of the widget (in R, not JavaScript), this function should accept the entire widget object as input and should return a modified widget object. That was not used in any of the widgets previously built but is extremely useful. It can be used to make checks on the object to ensure all is correct, or remove variables that should only be used internally, and much more.</p>
<p>Currently, <code>gio</code> takes the data frame <code>data</code> and serialises it in its entirety which will cause security concerns as all the data used in the widget is visible in the source code of the output. What if the data used for the visualisation contained an additional column with sensitive information? We ought to ensure gio only serialises the data necessary to produce the visualisation.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="co"># add a variable that should not be shared</span></a>
<a class="sourceLine" id="cb147-2" title="2">arcs<span class="op">$</span>secret_id &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span></a></code></pre></div>
<p>We create a <code>render_gio</code> function, which accepts the entire widget, filters only the column necessary from the data and returns the widget. This function is then passed to the argument <code>preRenderHook</code> of the <code>htmlwidgets::createWidget</code> call. This way, only the columns <code>e</code>, <code>v</code>, and <code>i</code> of the data are kept, thus the <code>secret_id</code> column will not be exposed publicly.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb148-1" title="1"><span class="co"># preRenderHook function</span></a>
<a class="sourceLine" id="cb148-2" title="2">render_gio &lt;-<span class="st"> </span><span class="cf">function</span>(g){</a>
<a class="sourceLine" id="cb148-3" title="3">  <span class="co"># only keep relevant variables</span></a>
<a class="sourceLine" id="cb148-4" title="4">  g<span class="op">$</span>x<span class="op">$</span>data &lt;-<span class="st"> </span>g<span class="op">$</span>x<span class="op">$</span>data[,<span class="kw">c</span>(<span class="st">&quot;e&quot;</span>, <span class="st">&quot;v&quot;</span>, <span class="st">&quot;i&quot;</span>)]</a>
<a class="sourceLine" id="cb148-5" title="5">  <span class="kw">return</span>(g)</a>
<a class="sourceLine" id="cb148-6" title="6">}</a>
<a class="sourceLine" id="cb148-7" title="7"></a>
<a class="sourceLine" id="cb148-8" title="8"><span class="co"># create widget</span></a>
<a class="sourceLine" id="cb148-9" title="9">htmlwidgets<span class="op">::</span><span class="kw">createWidget</span>(</a>
<a class="sourceLine" id="cb148-10" title="10">  <span class="dt">name =</span> <span class="st">&#39;gio&#39;</span>,</a>
<a class="sourceLine" id="cb148-11" title="11">  x,</a>
<a class="sourceLine" id="cb148-12" title="12">  <span class="dt">width =</span> width,</a>
<a class="sourceLine" id="cb148-13" title="13">  <span class="dt">height =</span> height,</a>
<a class="sourceLine" id="cb148-14" title="14">  <span class="dt">package =</span> <span class="st">&#39;gio&#39;</span>,</a>
<a class="sourceLine" id="cb148-15" title="15">  <span class="dt">elementId =</span> elementId,</a>
<a class="sourceLine" id="cb148-16" title="16">  <span class="dt">sizingPolicy =</span> htmlwidgets<span class="op">::</span><span class="kw">sizingPolicy</span>(</a>
<a class="sourceLine" id="cb148-17" title="17">    <span class="dt">defaultWidth =</span> <span class="st">&quot;100%&quot;</span>,</a>
<a class="sourceLine" id="cb148-18" title="18">    <span class="dt">padding =</span> <span class="dv">0</span>,</a>
<a class="sourceLine" id="cb148-19" title="19">    <span class="dt">browser.fill =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb148-20" title="20">  ),</a>
<a class="sourceLine" id="cb148-21" title="21">  <span class="dt">preRenderHook =</span> render_gio <span class="co"># pass renderer</span></a>
<a class="sourceLine" id="cb148-22" title="22">)</a></code></pre></div>
<p>Moreover, security aside, this can also improve performances as only the data relevant to the visualisation is serialised and subsequently loaded by the client. Without the modification above, were one to use <code>gio</code> on a dataset with 100 columns all would have been serialised, thereby significantly impacting performances both of the R process rendering the output and the web browser viewing the visualisation.</p>
</div>
<div id="widgets-adv-js" class="section level2">
<h2><span class="header-section-number">8.4</span> JavaScript Code</h2>
<p>As mentioned in a previous chapter, JavaScript code cannot be serialised to JSON.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="co"># serialised as string</span></a>
<a class="sourceLine" id="cb149-2" title="2">jsonlite<span class="op">::</span><span class="kw">toJSON</span>(<span class="st">&quot;var x = 3;&quot;</span>)</a>
<a class="sourceLine" id="cb149-3" title="3"><span class="co">#&gt; [&quot;var x = 3;&quot;]</span></a></code></pre></div>
<p>Nonetheless, it is doable with htmlwidgetsâ serialiser (and only that one). The function <code>htmlwidgets::JS</code> can be used to mark a character vector so that it will be treated as JavaScript code when evaluated in the browser.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb150-1" title="1">htmlwidgets<span class="op">::</span><span class="kw">JS</span>(<span class="st">&quot;var x = 3;&quot;</span>)  </a>
<a class="sourceLine" id="cb150-2" title="2"><span class="co">#&gt; [1] &quot;var x = 3;&quot;</span></a>
<a class="sourceLine" id="cb150-3" title="3"><span class="co">#&gt; attr(,&quot;class&quot;)</span></a>
<a class="sourceLine" id="cb150-4" title="4"><span class="co">#&gt; [1] &quot;JS_EVAL&quot;</span></a></code></pre></div>
<p>This can be useful where the library requires the use of callback functions, for instance.</p>
<div class="rmdnote">
<p>
Replacing the serialiser will break this feature.
</p>
</div>
</div>
<div id="widgets-adv-prepend-append" class="section level2">
<h2><span class="header-section-number">8.5</span> Prepend and Append Content</h2>
<p>There is the ability to append or prepend HTML content to the widget (Shiny, htmltools tags, or a list of those). For instance, we could use <code>htmlwidgets::prependContent</code> to allow displaying a title to the visualisation, as shown in Figure <a href="widgets-adv.html#fig:gio-title">8.4</a>.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb151-1" title="1"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb151-2" title="2">gio_title &lt;-<span class="st"> </span><span class="cf">function</span>(g, title){</a>
<a class="sourceLine" id="cb151-3" title="3">  title &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">h3</span>(title)</a>
<a class="sourceLine" id="cb151-4" title="4">  htmlwidgets<span class="op">::</span><span class="kw">prependContent</span>(g, title)</a>
<a class="sourceLine" id="cb151-5" title="5">}</a></code></pre></div>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb152-1" title="1"><span class="kw">gio</span>(arcs) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb152-2" title="2"><span class="st">  </span><span class="kw">gio_title</span>(<span class="st">&quot;Gio.js htmlwidget!&quot;</span>)</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:gio-title"></span>
<img src="images/gio-title.png" alt="Gio output with title" width="100%" />
<p class="caption">
FIGURE 8.4: Gio output with title
</p>
</div>
<p>While the <code>prependContent</code> function places the content above the visualisation, the <code>appendContent</code> function places it below, as they accept any valid htmltools or Shiny tag they can also be used for conditional CSS styling for instance.</p>
<div class="rmdnote">
<p>
<code>prependContent</code> and <code>appendContent</code> do not work in Shiny.
</p>
</div>
</div>
<div id="widgets-adv-dependencies" class="section level2">
<h2><span class="header-section-number">8.6</span> Dependencies</h2>
<p>Thus far, this book has only covered one of two ways dependencies can be included in htmlwidgets. Though the one covered, using the <code>.yml</code> file will likely be necessary for every widget it has one drawback: all dependencies listed in the file are always included with the output. Dependencies can significantly affect the load time of the output (be it a standalone visualisation, an R markdown document, or a Shiny application) as these files may be large. Most large visualisation libraries will therefore allow bundling those dependencies in separate files. For instance, ECharts.js provides a way to customise the bundle to only include dependencies for charts that one wants to draw (e.g., bar chart, or boxplot), highcharts also allows splitting dependencies so one can load those needed for maps, stock charts, and more, separately. It is thus good practice to do the same in widgets, so only the required dependencies are loaded, e.g.: when the user produces a map, only the dependency for that map is loaded. It is used in the leaflet package to load map tiles, for instance.</p>
<p>The Google Chrome network tab (see Figure <a href="widgets-adv.html#fig:htmlwidgets-performances">8.5</a>) shows the information on resources downloaded by the browser (including dependencies) including how long it takes. It is advisable to take a look at it to ensure no dependency drags load time.</p>
<div class="figure" style="text-align: center"><span id="fig:htmlwidgets-performances"></span>
<img src="images/htmlwidgets-performances.png" alt="Google Chrome network tab" width="100%" />
<p class="caption">
FIGURE 8.5: Google Chrome network tab
</p>
</div>
<p>To demonstrate, we will add a function in gio to optionally include <a href="https://github.com/mrdoob/stats.js/">stats.js</a>, a JavaScript performance monitor which displays information such as the number of frames per second (FPS) rendered, or the number of milliseconds needed to render the visualisation. Gio.js natively supports stats.js, but the dependency needs to be imported, and that option needs to be enabled on the <code>controller</code> as shown in the <a href="https://giojs.org/html/docs/interfaceStats.html">documentation</a>.</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb153-1" title="1"><span class="co">// enable stats</span></a>
<a class="sourceLine" id="cb153-2" title="2"><span class="va">controller</span>.<span class="at">enableStats</span>()<span class="op">;</span></a></code></pre></div>
<p>In htmlwidgets those additional dependencies can be specified via the <code>dependencies</code> argument in the <code>htmlwidgets::createWidget</code> function or they can be appended to the output of that function.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb154-1" title="1"><span class="co"># create gio object</span></a>
<a class="sourceLine" id="cb154-2" title="2">g &lt;-<span class="st"> </span>gio<span class="op">::</span><span class="kw">gio</span>(arcs)</a>
<a class="sourceLine" id="cb154-3" title="3"></a>
<a class="sourceLine" id="cb154-4" title="4"><span class="kw">is.null</span>(g<span class="op">$</span>dependencies)</a></code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>As shown above, the object created by <code>gio</code> includes dependencies, currently <code>NULL</code> as no such extra dependency is specified. One can therefore append those to that object in a fashion similar to what the <code>gio_style</code> function does.</p>
<p>From the root of the gio package, we create a new directory for the stats.js dependency and download the latest version from GitHub.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb156-1" title="1"><span class="kw">dir.create</span>(<span class="st">&quot;htmlwidgets/stats&quot;</span>)</a>
<a class="sourceLine" id="cb156-2" title="2">url &lt;-<span class="st"> </span><span class="kw">paste0</span>(</a>
<a class="sourceLine" id="cb156-3" title="3">  <span class="st">&quot;https://raw.githubusercontent.com/mrdoob/&quot;</span>,</a>
<a class="sourceLine" id="cb156-4" title="4">  <span class="st">&quot;stats.js/master/build/stats.min.js&quot;</span></a>
<a class="sourceLine" id="cb156-5" title="5">)</a>
<a class="sourceLine" id="cb156-6" title="6"><span class="kw">download.file</span>(url, <span class="dt">destfile =</span> <span class="st">&quot;htmlwidgets/stats/stats.min.js&quot;</span>)</a></code></pre></div>
<p>First we use the <code>system.file</code> function to retrieve <em>the path to the directory</em> contains the dependency (<code>stats.min.js</code>). Itâs important that it is the path to the directory and not the file itself.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb157-1" title="1"><span class="co"># stats.R</span></a>
<a class="sourceLine" id="cb157-2" title="2">gio_stats &lt;-<span class="st"> </span><span class="cf">function</span>(g){</a>
<a class="sourceLine" id="cb157-3" title="3"></a>
<a class="sourceLine" id="cb157-4" title="4">  <span class="co"># create dependency</span></a>
<a class="sourceLine" id="cb157-5" title="5">  path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;htmlwidgets/stats&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;gio&quot;</span>)</a>
<a class="sourceLine" id="cb157-6" title="6"></a>
<a class="sourceLine" id="cb157-7" title="7">  <span class="kw">return</span>(g)</a>
<a class="sourceLine" id="cb157-8" title="8"></a>
<a class="sourceLine" id="cb157-9" title="9">}</a></code></pre></div>
<p>Then we use the htmltools package to create a dependency, the <code>htmltools::htmlDependency</code> function returns an object of class <code>html_dependency</code>, which htmlwidgets can understand and subsequently insert in the output. On the <code>src</code> parameter, since we reference a dependency from the filesystem we name the character string <code>file</code>, but we could use the CDN (web-hosted file) and name it <code>href</code> instead.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb158-1" title="1"><span class="co"># stats.R</span></a>
<a class="sourceLine" id="cb158-2" title="2">gio_stats &lt;-<span class="st"> </span><span class="cf">function</span>(g){</a>
<a class="sourceLine" id="cb158-3" title="3"></a>
<a class="sourceLine" id="cb158-4" title="4">  <span class="co"># create dependency</span></a>
<a class="sourceLine" id="cb158-5" title="5">  path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;htmlwidgets/stats&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;gio&quot;</span>)</a>
<a class="sourceLine" id="cb158-6" title="6">  dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb158-7" title="7">    <span class="dt">name =</span> <span class="st">&quot;stats&quot;</span>,</a>
<a class="sourceLine" id="cb158-8" title="8">    <span class="dt">version =</span> <span class="st">&quot;17&quot;</span>,</a>
<a class="sourceLine" id="cb158-9" title="9">    <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb158-10" title="10">    <span class="dt">script =</span> <span class="st">&quot;stats.min.js&quot;</span></a>
<a class="sourceLine" id="cb158-11" title="11">  )</a>
<a class="sourceLine" id="cb158-12" title="12"></a>
<a class="sourceLine" id="cb158-13" title="13">  <span class="kw">return</span>(g)</a>
<a class="sourceLine" id="cb158-14" title="14"></a>
<a class="sourceLine" id="cb158-15" title="15">}</a></code></pre></div>
<p>The dependency then needs to be appended to the htmlwidgets object.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb159-1" title="1"><span class="co"># stats.R</span></a>
<a class="sourceLine" id="cb159-2" title="2">gio_stats &lt;-<span class="st"> </span><span class="cf">function</span>(g){</a>
<a class="sourceLine" id="cb159-3" title="3"></a>
<a class="sourceLine" id="cb159-4" title="4">  <span class="co"># create dependency</span></a>
<a class="sourceLine" id="cb159-5" title="5">  path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;htmlwidgets/stats&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;gio&quot;</span>)</a>
<a class="sourceLine" id="cb159-6" title="6">  dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb159-7" title="7">    <span class="dt">name =</span> <span class="st">&quot;stats&quot;</span>,</a>
<a class="sourceLine" id="cb159-8" title="8">    <span class="dt">version =</span> <span class="st">&quot;17&quot;</span>,</a>
<a class="sourceLine" id="cb159-9" title="9">    <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb159-10" title="10">    <span class="dt">script =</span> <span class="st">&quot;stats.min.js&quot;</span></a>
<a class="sourceLine" id="cb159-11" title="11">  )</a>
<a class="sourceLine" id="cb159-12" title="12"></a>
<a class="sourceLine" id="cb159-13" title="13">  <span class="co"># append dependency</span></a>
<a class="sourceLine" id="cb159-14" title="14">  g<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">append</span>(g<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</a>
<a class="sourceLine" id="cb159-15" title="15"></a>
<a class="sourceLine" id="cb159-16" title="16">  <span class="kw">return</span>(g)</a>
<a class="sourceLine" id="cb159-17" title="17"></a>
<a class="sourceLine" id="cb159-18" title="18">}</a></code></pre></div>
<p>Finally, we pass an additional variable in the list of options (<code>x</code>), which we will use JavaScript-side to check whether stats.js must be enabled.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb160-1" title="1"><span class="co">#&#39; @export</span></a>
<a class="sourceLine" id="cb160-2" title="2">gio_stats &lt;-<span class="st"> </span><span class="cf">function</span>(g){</a>
<a class="sourceLine" id="cb160-3" title="3"></a>
<a class="sourceLine" id="cb160-4" title="4">  <span class="co"># create dependency</span></a>
<a class="sourceLine" id="cb160-5" title="5">  path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;htmlwidgets/stats&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;gio&quot;</span>)</a>
<a class="sourceLine" id="cb160-6" title="6">  dep &lt;-<span class="st"> </span>htmltools<span class="op">::</span><span class="kw">htmlDependency</span>(</a>
<a class="sourceLine" id="cb160-7" title="7">    <span class="dt">name =</span> <span class="st">&quot;stats&quot;</span>,</a>
<a class="sourceLine" id="cb160-8" title="8">    <span class="dt">version =</span> <span class="st">&quot;17&quot;</span>,</a>
<a class="sourceLine" id="cb160-9" title="9">    <span class="dt">src =</span> <span class="kw">c</span>(<span class="dt">file =</span> path),</a>
<a class="sourceLine" id="cb160-10" title="10">    <span class="dt">script =</span> <span class="st">&quot;stats.min.js&quot;</span></a>
<a class="sourceLine" id="cb160-11" title="11">  )</a>
<a class="sourceLine" id="cb160-12" title="12"></a>
<a class="sourceLine" id="cb160-13" title="13">  <span class="co"># append dependency to gio.js</span></a>
<a class="sourceLine" id="cb160-14" title="14">  g<span class="op">$</span>dependencies &lt;-<span class="st"> </span><span class="kw">append</span>(g<span class="op">$</span>dependencies, <span class="kw">list</span>(dep))</a>
<a class="sourceLine" id="cb160-15" title="15"></a>
<a class="sourceLine" id="cb160-16" title="16">  <span class="co"># add stats variable</span></a>
<a class="sourceLine" id="cb160-17" title="17">  g<span class="op">$</span>x<span class="op">$</span>stats &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb160-18" title="18"></a>
<a class="sourceLine" id="cb160-19" title="19">  <span class="kw">return</span>(g)</a>
<a class="sourceLine" id="cb160-20" title="20">}</a></code></pre></div>
<p>Then it is a matter of using the <code>stats</code> variable added to <code>x</code> in the JavaScript <code>renderValue</code> function to determine whether the stats feature should be enabled.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb161-1" title="1"><span class="co">// gio.js</span></a>
<a class="sourceLine" id="cb161-2" title="2"><span class="cf">if</span>(<span class="va">x</span>.<span class="at">stats</span>)</a>
<a class="sourceLine" id="cb161-3" title="3">  <span class="va">controller</span>.<span class="at">enableStats</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb161-4" title="4"></a>
<a class="sourceLine" id="cb161-5" title="5"><span class="va">controller</span>.<span class="at">init</span>()<span class="op">;</span></a></code></pre></div>
<p>Then the package can be documented to export the newly-created function and loaded in the environment to test the feature, as shown in FIgure <a href="widgets-adv.html#fig:gio-stats">8.6</a>.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb162-1" title="1"><span class="co"># create gio object</span></a>
<a class="sourceLine" id="cb162-2" title="2">arcs <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb162-3" title="3"><span class="st">  </span><span class="kw">gio</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb162-4" title="4"><span class="st">  </span><span class="kw">gio_stats</span>()</a></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:gio-stats"></span>
<img src="images/stats.png" alt="Gio with stats output" width="100%" />
<p class="caption">
FIGURE 8.6: Gio with stats output
</p>
</div>
<p>In brief, it is better to only place the hard dependencies in the <code>.yml</code> file; dependencies that are necessary to produce the visualisation and use dynamic dependencies where ever possible. Perhaps one can think of it as the difference between <code>Imports</code> and <code>Suggests</code> in an R package <code>DESCRIPTION</code> file.</p>
</div>
<div id="widgets-adv-compatibility" class="section level2">
<h2><span class="header-section-number">8.7</span> Compatibility</h2>
<p>One issue that might arise is that of compatibility between widgets. What if someone else builds another htmlwidget for gio.js uses a different version of the library and that a user decides to use both packages in a Shiny app or R markdown document? Something is likely to fail as two different versions of gio.js are imported, and that one overrides the other. For instance, the package echarts4r <span class="citation">(Coene <a href="#ref-R-echarts4r">2021</a><a href="#ref-R-echarts4r">a</a>)</span> allows working with leaflet but including the dependencies could clash with the leaflet package itself. Therefore, it uses the dependencies from the leaflet package instead.</p>
<p>The htmlwidgets package comes with a function to extract the dependencies from a widget, so they can be reused in another. The function <code>htmlwidgets::getDependency</code> returns a list of objects of class <code>html_dependency</code>, which can therefore be used in other widgets as demonstrated in the previous section.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb163-1" title="1"><span class="co"># get dependencies of the gio package</span></a>
<a class="sourceLine" id="cb163-2" title="2">htmlwidgets<span class="op">::</span><span class="kw">getDependency</span>(<span class="st">&quot;gio&quot;</span>)[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</a></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; List of 10
#&gt;  $ name      : chr &quot;three&quot;
#&gt;  $ version   : chr &quot;110&quot;
#&gt;  $ src       :List of 1
#&gt;   ..$ file: chr &quot;/home/usr/gio/htmlwidgets/three&quot;
#&gt;  $ meta      : NULL
#&gt;  $ script    : chr &quot;three.min.js&quot;
#&gt;  $ stylesheet: NULL
#&gt;  $ head      : NULL
#&gt;  $ attachment: NULL
#&gt;  $ package   : NULL
#&gt;  $ all_files : logi TRUE
#&gt;  - attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;
#&gt; 
#&gt; [[2]]
#&gt; List of 10
#&gt;  $ name      : chr &quot;gio&quot;
#&gt;  $ version   : chr &quot;2&quot;
#&gt;  $ src       :List of 1
#&gt;   ..$ file: chr &quot;/home/usr/gio/htmlwidgets/gio&quot;
#&gt;  $ meta      : NULL
#&gt;  $ script    : chr &quot;gio.min.js&quot;
#&gt;  $ stylesheet: NULL
#&gt;  $ head      : NULL
#&gt;  $ attachment: NULL
#&gt;  $ package   : NULL
#&gt;  $ all_files : logi TRUE
#&gt;  - attr(*, &quot;class&quot;)= chr &quot;html_dependency&quot;</code></pre>
</div>
<div id="widgets-adv-unit-tests" class="section level2">
<h2><span class="header-section-number">8.8</span> Unit Tests</h2>
<p>The best way to write unit tests for htmlwidgets is to test the object created by <code>htmlwidgets::createWidget</code>. We provide the following example using testthat <span class="citation">(Wickham <a href="#ref-R-testthat">2020</a>)</span>, running <code>expect*</code> functions on the output of <code>gio</code>.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb165-1" title="1"><span class="kw">library</span>(gio)</a>
<a class="sourceLine" id="cb165-2" title="2"><span class="kw">library</span>(testthat)</a>
<a class="sourceLine" id="cb165-3" title="3"></a>
<a class="sourceLine" id="cb165-4" title="4"><span class="kw">test_that</span>(<span class="st">&quot;gio has correct data&quot;</span>, {</a>
<a class="sourceLine" id="cb165-5" title="5">  g &lt;-<span class="st"> </span><span class="kw">gio</span>(arcs)</a>
<a class="sourceLine" id="cb165-6" title="6"></a>
<a class="sourceLine" id="cb165-7" title="7">  <span class="co"># internally stored as data.frame</span></a>
<a class="sourceLine" id="cb165-8" title="8">  <span class="kw">expect_is</span>(g<span class="op">$</span>x<span class="op">$</span>data, <span class="st">&quot;data.frame&quot;</span>)</a>
<a class="sourceLine" id="cb165-9" title="9"></a>
<a class="sourceLine" id="cb165-10" title="10">  <span class="co"># gio does not work without data</span></a>
<a class="sourceLine" id="cb165-11" title="11">  <span class="kw">expect_error</span>(<span class="kw">gio</span>())</a>
<a class="sourceLine" id="cb165-12" title="12">})</a></code></pre></div>
</div>
<div id="widgets-adv-performances" class="section level2">
<h2><span class="header-section-number">8.9</span> Performances</h2>
<p>A few hints have already been given to ensure one does not drain the browser; consider assessing the performances of the widget as it is being built. Always try and imagine what happens under the hood of the htmlwidget as you build it; it often reveals potential bottlenecks and solutions.</p>
<p>Remember that data passed to <code>htmlwidgets::createWidget</code> is 1) loaded into R, 2) serialised to JSON, 3) embedded into the HTML output, 4) read back in with JavaScript, which adds some overhead considering it might be read into JavaScript directly. This will not be a problem for most visualisations but might become one when that data is large. Indeed, there are sometimes more efficient ways to load data into web browsers where it is needed for the visualisation.</p>
<p>Consider for instance, geographic features (topoJSON and GeoJSON), why load them into R if it is to then re-serialise it to JSON?</p>
<p>Also, keep the previous remark in mind when repeatedly serialising identical data objects, GeoJSON is again a good example. A map used twice or more should only be serialised once or better not at all. Consider providing other ways for the developer to make potentially large data files accessible to the browser.</p>
<p>Below is an example of a function that could be used within R markdown or Shiny UI to load data in the front end and bypass serialisation. Additionally, the function makes use of AJAX (Asynchronous JavaScript And XML) to asynchronously load the data, thereby further reducing load time.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb166-1" title="1"><span class="co"># this would placed in the shiny UI</span></a>
<a class="sourceLine" id="cb166-2" title="2">load_json_from_ui &lt;-<span class="st"> </span><span class="cf">function</span>(path_to_json){</a>
<a class="sourceLine" id="cb166-3" title="3">  script &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb166-4" title="4"><span class="st">    $.ajax({ </span></a>
<a class="sourceLine" id="cb166-5" title="5"><span class="st">        url: &#39;&quot;</span>, path_to_json, <span class="st">&quot;&#39;, </span></a>
<a class="sourceLine" id="cb166-6" title="6"><span class="st">        dataType: &#39;json&#39;, </span></a>
<a class="sourceLine" id="cb166-7" title="7"><span class="st">        async: true,</span></a>
<a class="sourceLine" id="cb166-8" title="8"><span class="st">        success: function(data){ </span></a>
<a class="sourceLine" id="cb166-9" title="9"><span class="st">          console.log(data);</span></a>
<a class="sourceLine" id="cb166-10" title="10"><span class="st">          window.globalData = data;</span></a>
<a class="sourceLine" id="cb166-11" title="11"><span class="st">        } </span></a>
<a class="sourceLine" id="cb166-12" title="12"><span class="st">      });&quot;</span></a>
<a class="sourceLine" id="cb166-13" title="13">    )</a>
<a class="sourceLine" id="cb166-14" title="14">  shiny<span class="op">::</span>tags<span class="op">$</span><span class="kw">script</span>(</a>
<a class="sourceLine" id="cb166-15" title="15">    script</a>
<a class="sourceLine" id="cb166-16" title="16">  )</a>
<a class="sourceLine" id="cb166-17" title="17">}</a></code></pre></div>
<p>Using the above the data loaded would be accessible from the htmlwidgets JavaScript (e.g.: <code>gio.js</code>) with <code>window.globalData</code>. The <code>window</code> object is akin to the <code>document</code> object, while the latter pertains to the Document Object Model (DOM) and represents the page, the former pertains to the Browser Object Model (BOM) and represents the browser window. While <code>var x;</code> will only be accessible within the script where it is declared, <code>window.x</code> will be accessible anywhere.</p>
<p>Note this means the data is read from the web browser, and therefore the data must be accessible to the web browser; the <code>path_to_json</code> must thus be a served static file, e.g.: <code>www</code> directory in Shiny.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-R-echarts4r">
<p>Coene, John. 2021a. <em>Echarts4r: Create Interactive Graphs with âEcharts Javascriptâ Version 5</em>.</p>
</div>
<div id="ref-R-testthat">
<p>Wickham, Hadley. 2020. <em>Testthat: Unit Testing for R</em>. <a href="https://CRAN.R-project.org/package=testthat">https://CRAN.R-project.org/package=testthat</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="widgets-full.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="linking-widgets.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/JohnCoene/javascript-for-r/edit/master/3-25-htmlwidgets-advanced.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
